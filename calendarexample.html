<!DOCTYPE html>
<html>
<head>
	<meta charset='utf-8' />
	<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css' />
	<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js'></script>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js'></script>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js'></script>
	<script>
		$(document).ready(function() {
			// define the calendar
			$('#calendar').fullCalendar({
				header: {
					left: 'prev,next today',
					center: 'title',
					right: 'month,agendaWeek,agendaDay'
				},
				events: {
					url: 'room-bookings.xml',
					cache: true,
					type: 'GET',
					dataType: 'xml',
					success: function(data) {
						var events = [];
						$(data).find('item').each(function() {
							var event = {
								title: $(this).find('title').text(),
								start: $(this).find('pubDate').text(),
								description: $(this).find('description').text()
							};
							events.push(event);
						});
						$('#calendar').fullCalendar('renderEvents', events, true);
					}
				},
				eventClick: function(event) {
					// display event details in a popup
					alert('Title: ' + event.title + '\nStart: ' + event.start.format('YYYY-MM-DD HH:mm:ss') + '\nDescription: ' + event.description);
				}
			});
		});
	</script>
	<script>
	success: function(data) {
    var events = [];
    $(data).find('item').each(function() {
        var event = {
            title: $(this).find('title').text(),
            start: $(this).find('pubDate').text(),
            description: $(this).find('description').text()
        };
        events.push(event);
    });
    $('#calendar').fullCalendar('removeEvents');
    $('#calendar').fullCalendar('renderEvents', events, true);
}

</script>

</head>
<body>
	<div id='calendar'></div>

<div id="eventList">
    <h2>Upcoming Events:</h2>
    <ul></ul>
</div>
</body>
</html>
